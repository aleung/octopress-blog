
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Good good study, day day up</title>
  <meta name="author" content="Leo Liang">

  
  <meta name="description" content="看这个”喜欢学中文的美国老外”的blog，他的写中文文章的方法跟我们很不同，先用拼音将文章通篇写出来，再用软件转化为汉字。 最近学英语，也在思考语言的表音和表意这个问题。拉丁文是一种表音的文字，而中文（汉字）是综合了表音和表意的功能，应该是更多的偏于表意。因为在汉语学习中有”认字”这个说法。中国（ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://aleung.github.com/blog/blog/page/15/">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="/blog/javascripts/ender.js"></script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/GoodGoodStudyDayDayUp" rel="alternate" title="Good good study, day day up" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">Good good study, day day up</a></h1>
  
    <h2>aleung的学习笔记, aleung的idea</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/GoodGoodStudyDayDayUp" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:aleung.github.com/blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/04/19/See-how-foreigners-write-Chinese-articles/">看外国人怎么写中文文章</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-19T21:29:00+08:00" pubdate data-updated="true">2006-04-19</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/idea/'>Idea</a>, <a class='tag' href='/blog/tags/learning/'>Learning</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>看这个”喜欢学中文的美国老外”的blog，<a href="http://spaces.msn.com/aradosh/Blog/cns!4B8704B442B4C2FC!1109.entry">他的写中文文章的方法</a>跟我们很不同，先用拼音将文章通篇写出来，再用软件转化为汉字。</p>

<p>最近学英语，也在思考语言的表音和表意这个问题。拉丁文是一种表音的文字，而中文（汉字）是综合了表音和表意的功能，应该是更多的偏于表意。因为在汉语学习中有”认字”这个说法。中国（大陆）曾经有将汉字拼音化的计划，但因为汉字有表意的特点，单纯的拼音化并不成功。有关汉字、拼音化文字和表音文字等等的资料，在维基百科可以查到。</p>

<p>我的英语听力不怎么好，有些时候我会认得一个单词的大概样子从而知道它的意思，但不知道它的准确发音，故此我在听觉上接收到这个单词的时候就不能认知出它的意思。我想，这一方面是因为我更多机会是通过视觉方式（阅读）上接触英语，而不是听觉方式（听/说），另外一方面也许也与使用汉语的习惯有关。</p>

<p>以英语为母语的人，他们的会更加习惯于拼音化的文字，这也许就是为什么他会采用这样的写作方式。对于他们，学习汉语首先是听/说，然后才是读/写？</p>

<p>另外一个问题，我们在大脑中的思考，是否必须基于语言的呢？当我们要写一篇汉语文章的时候，应该都是先在脑海中讲句子默念出来，用自己习惯的语言。例如用普通话，或者方言。我察觉不到这个思维与语言之间的转化过程。也许，这个转换是一个无意识的过程，因为我们对自己的语言已经能够熟练运用。这就是为什么说，要到能够用英语来思考的地步，才是真正学好它。</p>
</div>
  
  
  
    <footer>
        <a href="/blog/2006/04/19/See-how-foreigners-write-Chinese-articles/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/04/10/CP950-/">CP950相机拆装记录</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-04-10T00:34:00+08:00" pubdate data-updated="true">2006-04-10</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/diy/'>Diy</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>我的古董数码相机Nikon Coolpix 950已经服役五年多了，去年终于不能工作，表现为快门无法打开。最初是开机后快门打不开，但多按几次后就能正常，但后来就怎么都开不了了。</p>

<p>原来就打算将它拆开看看的，刚好最近在无忌上看到了<a href="http://www.xitek.com/forum/showthread.php?threadid=323436">一篇帖子</a>，介绍995的镜头的拆卸。看完后来了兴趣，今天把相机的镜头部分拆开了（这款相机的镜头与机身是分离的）。反正死马当作活马医，弄不好也不心痛。一层层拆下来，最终将快门组件拆开了。快门叶片是两片薄片，像剪刀口一样，通过一条拨杆由电磁铁控制。把叶片小心的拿开，把下面的垫片也拿起来，看到下面一层就是光圈了。光圈也是类似快门一样由几片叶片构成，不过看起来比较精细，而且有小弹簧等东西，不敢再拆了，怕装不回去，于是就把快门叶片重新装好。用镊子把快门拨杆拨动一下，快门能够正常开合。估计是使用得久，快门不如原来顺畅，容易卡住。我也不知道有什么办法可以处理，既然它能够动了，就把它装回去，将快门组件的上盖上回来，再试试拨动快门叶片，感觉有点紧，于是就将螺丝稍微拧松一些。将镜头组装回原样，装上电池试机，哈哈，一切正常。虽然很可能快门再用一段时间还是会再出问题，但好歹现在能用了。</p>

<p>950的结构与995大体上是近似的。不过950的外壳拆开后，竟然里面还有一个内壳，从无忌帖子的照片上看，995就没有这样的双层壳结构了。如果是测评写手，就会说它是用料十足。以前没有拆过相机，但950拆起来并不难，组装回去也没有太多棘手的地方。螺丝比较多，而且不同部件的螺丝都不同的，我的做法是一边拆一边用一张纸画下草图，并将卸下来的螺丝用透明胶贴在纸上，这样就不会丢失不会混淆了。拆相机要小心闪光灯，不知道这些相机的闪光灯是否高压的，保险起见我用镊子将闪光电路的电容短路了一下，虽然相机已经卸下电池一两个月了，电容放电时还是啪的很响一个火花。镜头拆装一次，进了一点灰尘，镜片也沾了一点手指印，东西太小，拿在手上翻来翻去很容易沾上。将镜头组拆下来的时候，突然掉下一个小弹簧，吓了一跳，又不知道从哪里掉出来的，心想很可能装不回去了，幸好后来发现这个小弹簧还是很容易装的。</p>

<p>拆过之后，感觉这种小相机的镜头，什么几片几组，其实都没有什么太复杂的，拆到最后就是两块小东西（前镜组和后镜组），中间两根金属导轨连起来，整个看起来就好像塑料玩具一样。对焦和变焦靠的是两个小电机带动蜗杆，结构也很简单。还有那片CCD也不是想象中那样脆弱，看上去象一片带透明上盖的集成电路。</p>
</div>
  
  
  
    <footer>
        <a href="/blog/2006/04/10/CP950-/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/01/06/Version-control-with-UML-reverse-engineering/">Version Control With UML Reverse Engineering</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-01-06T02:18:00+08:00" pubdate data-updated="true">2006-01-06</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/idea/'>Idea</a>, <a class='tag' href='/blog/tags/softwaredev/'>SoftwareDev</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>现在的版本管理工具都具有版本比较的功能，可以比较一个文件不同版本间的差别，将变化的代码行标记出来。对于常见的开发语言，也有工具可以进行UML逆向工程，根据代码生成出class diagram，这提供了一个概览代码的途径，对于理解代码整体结构很有帮助。有没有可能再进一步，将UML逆向工程与版本管理结合在一起呢？</p>

<p>我设想的工具具有这样的功能：将两个版本的project进行比较，生成出class diagram，并且将变化过的（增加/修改/删除）类、方法、关系等UML元素用特别颜色标记出来。这样，就可以方便的看到两个版本之间修改过什么类、方法，而不仅仅是只是在代码行的级别。</p>

<p>这样，做代码review也方便多了，知道重点看哪里。</p>
</div>
  
  
  
    <footer>
        <a href="/blog/2006/01/06/Version-control-with-UML-reverse-engineering/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/12/13/My-hard-disk-is-what-to-eat-/">我的硬盘被什么吃了？</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-12-13T07:14:00+08:00" pubdate data-updated="true">2005-12-13</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/software/'>Software</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>啊，硬盘又满了，要清理一下了。每个电脑使用者都常常要面对这样的问题，硬盘越来越大，可是里面要塞的东西也越来越多。要清理硬盘，首先就需要找出是什么东西把硬盘占满了。有一些工具可以帮助我们，显示出每个目录占用的空间大小，但通常这些工具都只能简单的列出某层目录所占用的空间大小，并不能给出整个硬盘空间的占用情况。</p>

<p><a href="http://windirstat.sourceforge.net/">WinDirStat</a>，这个移植自Linux KDE KDirStat的软件通过直观的图形告诉你硬盘的占用情况。我觉得这真是非常优秀的人机界面设计，不用复杂的操作，界面也不算繁复，一切信息那么一目了然。</p>

<p><a href="http://www.flickr.com/photos/aleung/72826124/"><img src="http://static.flickr.com/20/72826124_5fe787b3e0.jpg" alt="WinDirStat" /></a></p>

<p>看看这个程序的屏幕截图，很简单。下面的图表示硬盘的文件大小分布，每个小方块代表一个文件，文件越大，方块面积越大。</p>

<ol>
  <li>在左上部分的目录树中选中一个目录，分布图中会通过白色方框告诉你这个目录占用了多少磁盘空间；反之，鼠标点击图中的一个方块，会在目录树中将这个文件定位出来 </li>
  <li>鼠标指向任一个方块，在状态条中显示对应的文件名 </li>
  <li>不同颜色代表不同文件后缀，在右上部分的后缀列表中选中一个后缀，分布图中此后缀文件所对应的方块会突出显示</li>
</ol>

<p>不过，这个软件的分布图的缺省显示是有立体效果的，一个个方块好像昆虫的复眼一样，看久了有点毛骨悚然。我修改了一下显示配置，让它显示成现在这个效果。</p>

<p>Options - Config - Treemap</p>

<ul>
  <li>Grid color: light grey</li>
  <li>Highlighting Rectangle: yellow</li>
  <li>Brightness: 55</li>
  <li>Cushion Shading: 100</li>
  <li>Height: 19</li>
  <li>Scale Factor: 29</li>
</ul>
</div>
  
  
  
    <footer>
        <a href="/blog/2005/12/13/My-hard-disk-is-what-to-eat-/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/12/12/The-Kennedy-assassination-of-speech-of-the-movie/">《刺杀肯尼迪》片尾演讲</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-12-12T21:30:00+08:00" pubdate data-updated="true">2005-12-12</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/misc/'>Misc</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p><em>JFK，一部政治电影，导演在叙述他的政治观点的同时，更在诠释着民主与自由的理念，国家、政府与人民的关系。下面一段是片子最后半小时，检察官在法庭上的陈述，其实也是电影要表达的思想的总结。文字绝对不如电影有震撼力，这部3个小时的电影值得一看。</em></p>

<p>电影介绍：<a href="http://www.douban.com/subject/1292230/">JFK</a></p>

<p>　　有谁会为埋在廉价墓地里的奥斯瓦多感到伤心呢？没有。几分钟之内，关于奥斯瓦多的不实报道就传遍了全球。传说出自政府，新闻界的消息来自政府。当局在撒谎，史诗般壮观的肯尼迪葬礼迷惑了我们的双眼和我们的头脑。希特勒说过：越大的谎言就越有人相信。李哈维奥斯瓦多，一个疯狂的孤独的无名之辈，想出风头而暗杀总统，只是一长串名单中的第一个替罪羊。而近年来，罗伯特肯尼迪，马丁路德金，凡是想改革想和平的人都是渴望战争的权贵们的眼中钉。这些人也都被疯狂的孤独的个人杀害了。这些没有意义的个人愚蠢行为使我们毫无内疚。我们都成了哈姆雷特，认杀父仇人为亲人，让凶手占据着皇位。 <br />
　　 <br />
　　肯尼迪和他被害的秘密与我们在我们的美国梦中相遇，他向我们提出这样的问题：我们的宪法核心是什么？我们的生命价值又是什么？一个国家的总统被杀害，在诸多疑问面前，它的司法机构只会发抖。这个国家的民主又是什么？还有多少政治谋杀，将会说成是心脏病发作，将会说成是自杀、癌症和过量吸毒。还有多少飞机失事和车祸，将会发生在事情暴露的前夜？ <br />
　　 <br />
　　有一位英国诗人曾经写道：背信弃义永远不会成功。为什么？因为他成功了就没有人叫他背信弃义。为什么美国人民还没有看到赞布鲁得的录像带？为什么成千上万的文件可以作证，为什么却被政府撤掉并烧毁？每次当我在办公室或是你们人民提出疑问，要求查看证据，得到的回答总是：国家安全机密。我们的国家领导人被夺取了生命，还有什么国家安全可言？什么样的国家安全允许剥夺人民最基本的权利，并批准一个看不见的政府统治美国？这样的国家安全，陪审团的先生们，当它闻起来如此，看上去如此，感觉到如此，你们就可以叫它——法西斯主义！ <br />
　　 <br />
　　我向你们提出发生在1963年11月22日的事件，是一场政变！它最直接最可悲的后果，就是改变了肯尼迪从越南撤军的决定。每年消耗800亿美元的战争，是美国收益最大的生意。肯尼迪总统的谋杀案，是由政府最高层事先策划，由五角大楼和中央情报局当中鼓吹战争的狂热分子实施。你们面前的克莱肖就是他们当中的一员！ <br />
　　 <br />
　　这是毫无疑问的。可却被达拉斯警方、特工处、联邦调查局和白宫里臭味相投的人庇护起来，这里还包括艾德加胡佛和林登约翰逊，我相信他们在事后成为共犯！因前总统遇刺而进入白宫的那个总统，一方面尽可能多的大谈渴望和平，同时在国会里为他的军事合同伙伴充当生意代理人。 <br />
　　 <br />
　　现在有人说我简直是疯了，一个南方小丑在寻求高官厚禄。这有一个简单的办法能证明我是否是一个偏执狂。要求从前总统遇刺中受益的那两个人和你们的新总统里查德尼克松公布中央情报局关于奥斯瓦多和杰克鲁比的51份文件，或是在复制时被毁坏的，或关于奥斯瓦多在苏联活动的秘密备忘录。这些文件是你们的，是人民的财产，你们付了钱的。但是政府或许认为你们都是孩子，会被事实吓坏，或许你们会过于激动，私自处死有关人员。所以在未来的25年里，你们看不到这些文件。 <br />
　　 <br />
　　我现在40岁了，所以我熬不到那一天了。但是我已经告诉了我8岁的儿子，让他保持身体健康，以便在2038年一个光荣的9月早晨，可以走进国家档案馆，发现中央情报局和联邦调查局的秘密。他们可能会把时间再次推迟，这可能成为几代人的事。父亲把问题传给儿子，一代传一代。不过总有一天，在某个地方，某个人发现该死的真相。到那时，我们最好，我们最好给自己建立一个新的政府。正如《独立宣言》所说的：任何形式的政府一旦起破坏作用，人民便有权予以更换和废除。 <br />
　　 <br />
　　一个美国博物学家说：一个爱国者必须随时准备和政府斗争，以保护他的国家。我很不愿意处于你们今天的地位，你们有很多事情需要思考，你们看了公众没有看到的证据。回想起我们小时候，大多数人都认为正义是自己降落在我们中间的。美德是对美德最好的回报，正义一定能够战胜邪恶。可我们长大后发现事情并不是这样。我们每个人都必须为正义而斗争，这并不容易。因为真理总是会引起权势们的恐慌，我们不得不冒着风险和权势们斗争。像艾塞姆赫兰、李鲍尔斯、杰希恩、威尔奥吉夫，都冒了很大的风险向前走去。 <br />
　　 <br />
　　我这有从全国各地寄来的8000美元，分票毛票一元两元，来自家庭主妇、伐木工人、汽车推销员、教师，他们都是平民百姓，他们都不富裕。他们开着送货车，他们在医院护理病人，他们看着自己的孩子开赴越南。为什么？因为他们在乎并想知道真相，因为他们想找回自己的国家。因为只要我们能为自己的信仰而斗争，这个国家仍然是我们的。 <br />
　　 <br />
　　寻求真理，仍然是我们最重要的人生价值。如果真理已经被政府谋杀，如果人民不再受到尊重，那么这个地方就不是我出生的那个国家，肯定也将不是我想终生与之厮守的国家。 <br />
　　 <br />
　　但尼生写道：当权者忘却了死去的国王。这就是约翰福特肯尼迪的真实写照。他的被害也许是我们国家历史上最可怕的事情之一。我们的人民，我们的陪审制度，今天面对对克莱肖的裁决，代表着人民与政府斗争的希望。所以我恳请你们，在解散陪审团之前，给克莱肖定罪。我肯请你们。不要问这国家能为你做什么，问自己能为国家做什么！ <br />
　　 <br />
　　不要忘却你们死去的国王。这仍然是一个，一个民有、民治和民享的政府。只要我们活着，没有比这更重要的了。 <br />
　　 <br />
　　全看你们的了。 </p>
</div>
  
  
  
    <footer>
        <a href="/blog/2005/12/12/The-Kennedy-assassination-of-speech-of-the-movie/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/12/04/Guangzhou-traffic/">广州的交通</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-12-04T22:13:00+08:00" pubdate data-updated="true">2005-12-04</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/idea/'>Idea</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>今天读报，《市建委主任<strong>再</strong>拍胸脯，天河塞车三年内一定解决》。去年6月他就说三年内可<strong>根本</strong>解决天河交通问题，到现在一年半过去了，堵的继续堵，不堵的也开始堵。我不知道他为什么说话不给自己留条后路，既然他这么说，我就拭目以待，天河塞车问题是我们切肤之痛。我不知道他近日说的三年是从现在算起的三年还是去年说的三年，不过人家说是<strong>根本解决</strong>啊，根本解决了之后是否就不会再有塞车出现？要真是这样就算要等上四年五年，十年八年我也很高兴了，但别让我等一辈子就行了。</p>

<p>关于如何解决广州交通的问题，政府的规划看上去还是挺美的，分析了各方面原因并给出解决方案，不过我觉得还有一点原因没有提，就是广州的交警不作为。现在的道路通行能力差，我觉得近半原因是混乱造成的，这个不解决，修更多的路更多的桥也不管用。不能老怪市民没有素质，都是给逼出来的——老实人吃亏，现状就是鼓励违反交通规则的人，你要老老实实开车、老老实实过马路，那就慢慢等吧。但是这点给建委主任提也没有用，不归他管，因此我是挺替他担心的。</p>

<p>我不是专业人士，不敢像人家那样拍胸脯说些言之确凿的数字，只能胡乱发布些自己的看法。</p>

<p>天河的道路的通行能力都不高，因为车速上不去，每个路口都是一个瓶颈，路口的通过量制约了整条道路以致路网的通行能力。天河东西向没有一条路具备主干道的能力，广源东路更多是作为区域外环通道，对区内交通帮助不大。随着城市东部人口不断增加，将来天河的交通压力越来越大，如果没有主动脉，我看很难有什么本质改变。</p>

<p>在车道设计上，也会对通行能力做成影响。例如有些地方转弯半径过小，大车要小心翼翼的过，甚至转不过去，后边就堵上一长串车龙乐；一些车道要在高架桥的桥墩之间绕来绕去；公交车站就设立在路口旁边。天河城的多车道港湾公交车站本来挺好的，偏偏到了出口处就要挤成一团，如果改成像高速公路出入口那样，出口延伸出去对应一条车道可能会好些。</p>

<p>小区交通方面，现在的摩的大行其道，自然是由于有市场需求。公交线路的覆盖范围有限，公交车站也不能过密，市民下车后往往还要走较远的一段距离，需要有代步的工具。不过摩的始终会带来很多安全隐患，小区交通应该有专门的载体。作为接驳公交车站到居民小区以及小区内的近距离交通工具，我觉得电瓶车就挺合适，载客量适中开行灵活，车速较低比较安全，没有尾气污染，噪声也低，估计运营成本也不高。现在电瓶车都是不允许上路的，其实我觉得应该适当放宽些，允许在一定范围内像小区路段内开行。至于政府规划中的所谓开放小区道路，打通微循环，我觉得是弊大于利，无非后果就是让市民的生活环境更恶化一些，大马路成了大停车场了，连这些小区路都要堵上。路网应该是血液循环系统一样，有主动脉主静脉，再分支，直到毛细血管。主动脉堵塞了，希望打通毛细血管来改善循环，这不是荒唐吗。</p>

<p>近距离交通还有一个选择是自行车（包括电动自行车）。虽然我到目前依然是坚持骑自行车上下班，但必须承认自行车在这城市中最终将会消失，尽管欧洲一些城市现在反而推广自行车作为交通工具。在广州的路面，骑自行车危机重重，严重的废气也让人不得不放弃。其实自行车作为近距离交通工具也是很有优势的，不是像以前那样作为主要交通工具，而是公共交通的辅助，例如在非城中心区的地铁站提供自行车停车场。自行车停放其实很省地方，也容易做到立体分层停放。BTW，看单排轮滑的书，里面说单排轮滑是可以作为交通工具用的，说的当然不是中国了。</p>
</div>
  
  
  
    <footer>
        <a href="/blog/2005/12/04/Guangzhou-traffic/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/12/03/ACE-concept-map/">ACE Concept Map</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-12-03T02:16:00+08:00" pubdate data-updated="true">2005-12-03</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/softwaredev/'>SoftwareDev</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>ACE(The ADAPTIVE Communication Environment)是一套功能非常丰富的open source C++ library/framework，虽然目前已经有相关的一些书籍和在线文档，但要全面的掌握它依然不是一件容易的事情。</p>

<p>花了几天时间，将ACE的主要功能整理了一下，用 mind map 归纳出来，这有助于了解ACE提供些什么功能，也可以用作速查参考，查找要实现某项功能时应该用ACE的什么类。</p>

<p>下图未将节点完全展开，请下载: <a href="http://aleung.blogbus.com/files/1133518564.rar">ACE.mm</a> (使用<a href="http://freemind.sourceforge.net">FreeMind</a>打开)  </p>

<p><a href="http://www.flickr.com/photos/aleung/69324015/"><img src="http://static.flickr.com/35/69324015_6c168b2ec2.jpg" alt="ACE concept map" /></a></p>
</div>
  
  
  
    <footer>
        <a href="/blog/2005/12/03/ACE-concept-map/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/12/02/C-/">C++中生成格式化字符串方法的性能比较</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-12-02T22:28:00+08:00" pubdate data-updated="true">2005-12-02</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/softwaredev/'>SoftwareDev</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>在C++中进行格式化字符串的生成，通常有两种方法。一种是C风格的，使用sprintf生成格式化字符串，用str系列字符串函数进行字符串（实际是内存buffer）的拼接、拷贝等操作。另外一种是C++风格的，用string stream类通过流操作来生成格式化的字符串。</p>

<p>在使用上，两种方法各有长短，在这里不作分析。我发现的问题是string stream的效率相对C的方法效率比较低。</p>

<p>编写了两个程序做对比测试，都是模拟写日志文件的操作，往文件里面写入特定数量的文字信息，每行包括了字符串、整数，分别使用两种方法生成同样的内容。为了避免代码其余部分造成的影响，使用rational quantify采集运行的时间信息，只比较生成格式化字符串部分的代码运行所占用的时间。做了多次测试，结果都表明，C++风格方法的耗时是C风格方法的3倍。</p>

<p>结论是string stream的效率相对sprintf要低，实现同样的功能耗时大概是3倍左右。其实STL慢是很正常的，毕竟复杂很多，只是没想到慢这么多。其实大多数应用中，这也不算什么问题，毕竟现在的处理器能力这么强，只有在对性能要求极端严格的场合才需要把这因素考虑进去。</p>
</div>
  
  
  
    <footer>
        <a href="/blog/2005/12/02/C-/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/11/28/The-network-of-killing-game-formerly-known-as-F2F-face-to-face-/">网络上的杀人游戏（原名：F2F—面对面）</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-11-28T07:40:00+08:00" pubdate data-updated="true">2005-11-28</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/novel/'>Novel</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>不要以为我说的是流行的杀人游戏，虽然也有人将这个游戏搬到网上来玩。我下面要贴出来的是一部小说，原名是F2F(face to face)，可能是译者觉得“网络上的杀人游戏”这个直白的名字更加让人容易了解小说的内容。</p>

<p>我读到这小说的中文翻译是在1997年春节，是清华大学的一个同学给我的。（那时还不知道有杀人这种游戏）。当时同学叫我不要传出去，因为译者可能想要出版。今天整理旧文件的时候把这个document翻出来了，google上搜索一下，没有找到任何相关的资料，看来书是没有出成。都过了那么久了，不忍心让它埋没了，把它贴出来共享一下。在此向翻译者致敬（抱歉我不知道他的名字）！</p>

<p>这小说有一定年头了——相对日新月异的网络发展速度而言，小说中所说的网络不是现在大家熟知的Internet，而是由一个个拨号BBS站台组成的网络，网友通过model拨号登录到本地的BBS上传下载信件或文件，异地的BBS之间会定时交换信件。我读这小说的时候，正在玩FIDO NET，所以对小说的背景相当熟悉，感觉小说很吸引人，不知道现在的读者还会不会有这样的感受了。也藉这篇小说，怀念一下CFIDO上的岁月。</p>

<hr />

<p>网络上的杀人游戏</p>

<p>（原名：F2F—面对面）</p>

<p>作者：Philip Finch</p>

<p>    当入侵者在午夜至黎明期间那段最为沉寂的时间里悄然而入的时候，她正处于熟睡之中。<br />
    这女人一人独居。离她睡觉的地方几英尺远有一个小小的角落，她把这角落当作办公室，在那里一台个人电脑和一台激光打印机占据了桌面上的大部分空间。<br />
    那台电脑嗡嗡地响着，几乎是悄无声息地，这是关在电脑硬盘驱动器里的盘片旋转时所发出的声音以及一台小冷却扇的呼呼声。<br />
    一根延伸导线把电脑的调制解调器与一部电话的插口连接在一起——入侵者就是从这里闯进来的。<br />
    大约凌晨两点的时候，一个电话呼叫悄悄地连上了电脑。但这女人却没有察觉这一举动，因为它太不令人注意了，只不过是一盏小红灯的闪烁和硬盘极为微弱的滴答声而已。<br />
    有人在使用电脑。有人通过这根导线从几英里之外来到这里，并控制了这台电脑。女人仍在熟睡。<br />
    她已经完全接受了电脑这一概念。她认为，电脑真是个神奇的东西。她为自己的电脑找了几十种工作，从通信联系到分析饮食、平衡支票簿和支付账单。<br />
    与此同时，她还把自己生活中的一些最隐秘、最突出的细节都信任地托付给了它。这些是她储存在电脑硬盘上的秘密，她相信它们在那里是很安全的，可以躲开那些探询的目光。<br />
    入侵者当即开始工作，游览盘上的目录，拷备文件——吞噬着她的秘密。<br />
    自始至终，只有驱动器发出的呼呼声和轻轻的滴答声。<br />
    接着，大约十五分钟以后，一切又恢复沉寂。连接被中断了。<br />
    这女人仍沉浸在睡梦之中，一点都没意识到——从某种最真实的意义上说——她已经被人强暴了。</p>

<p>序曲</p>

<p>SNOWFLAKE<br />
(雪片)</p>

<p>3月24日—25日</p>

<p>警告</p>

<p>    你的生命正处于危险之中。当你看到这则消息的时候，凶手对你已伸手可及。死亡就站在你身后，默不作声，而且你也看不到它。在任何时候，当它伸手拍你的肩膀时，你的后脖子就会感觉到它那冰冷的呼吸……</p>

<p>    不久之后，看到这条消息的某个人将奇怪而又恐怖地死在我的手中。（也许就是你！）</p>

<p>    你告诉自己：这不可能。不会是我。</p>

<p>    因为你相信对方并不知道你，也注意不到你。你感觉得到你与制造这条消息的人之间的距离缓冲区。你的隐私给你以安慰。<br />
    <br />
    但是，没有缓冲区。这段文章到了你那儿这一事实已经证明：不管你在哪儿，我都可能在那儿。</p>

<p>    至于隐私，它已不再存在。为了便利我们已经把它给牺牲了，它是我们献给“电子老爷”的煮熟的供品。你的被数字化了的细节都在公用区内，任何人，只要稍微有一丁点的智力和专业知识，都可以得到它。你暴露无遗。对我而言，你就象一个被绑在床角的四根立柱上脱光了衣服的妓女一样毫无遮掩。闲来无事的时候，我将研究研究你。我将仔仔细细、不紧不慢地把你解剖开来，检查检查，然后将你大卸八块。你完全处于我的摆布之下。<br />
    <br />
    我认识你。</p>

<p>    知识就是力量。</p>

<p>    力量是我的。</p>

<p>    你无法躲藏。</p>

<p>    有何反应？</p>

<hr />

<p>    三月份最后一个星期的星期五晚上七点四十八分，杀手如是宣告了他的到来。他把文件传送——或叫“上载”——到Verbum电子交换机的公告牌内。<br />
    Verbum是电脑用户可获得的几千种在线服务之一。有些服务，象Compuserve和Prodigy这样的商业巨人，是巨大的数据和信息市场，它们服务的是成百上千万的付费用户。<br />
    Verbum远没有如此庞大的规模。它是一种免费服务，由圣弗朗西斯科的一家社会研究基金会赞助，这家基金会又是靠一群非正式的软件作家和其他一些人的捐赠来运行的——而这些人的成功则归功于电脑和电子革命。然而对于在线鉴赏家来说，它是一个颇受欢迎的聚会场所。其用户总的来说都受过良好的、至少说相当足够的教育，而且年龄都在五十岁以下。他们中几乎所有的人对未来的电子时代都充满热忱，并且自信地认为，在那个时代里，他们能拥有自己的一席之地。单就这一特征便把他们同大多数人分离开来。<br />
    从物质的角度来说，Verbum是位于圣弗朗西斯科南市场区的这家社会研究基金会的办公室里的一大堆硬件组成，它与84根电话线连接在一起。有一半以上的Verbum用户是圣·弗朗西斯科地区的居民，对他们来说，这项服务只不过是打一次市内电话而已。但是从某种意义上讲，象Verbum这样的网络使地理学的有些概念变得有待进一步商榷了。对任何人，只要有电脑和调制解调器，那么在线网就跟离他最进的电话机的插口一样远。<br />
    Verbum每周要记录大约800条登录信息——通过外部电话线路的单独进网信息。用户在Verbum的电子系统里碰头，他们通过计算机键盘在那里闲聊、争论、演讲、猜测，以及调情。<br />
    发布到公告牌及网络里其他任何地方的消息都既不用经过检查，也无需获得批准。Verbum被认为是一个真正开放的媒体。其唯一禁止的是不准发布受专利保护的材料——这有法律上的原因。<br />
    虽然几乎所有的在线服务都允许非正式的绰号，即所谓的“登录名”，但大多数都要求用户登记他们的地址和真实姓名。<br />
    而Verbum却没有这样的要求。许多用户的确注册了，这样他们就能获得选定登录名所特有权利，而且能使用一个电子邮件箱来接收和保存自己的个人信件。然而，即使是注册用户有时也用新的登录名登录，装扮成不同的角色，以不为人知的新加入者的身份漫游整个系统。<br />
    从本质上讲，Verbum是一个庞大的化装舞会，任何人都可以随心所欲地进出，或者更换服装。<br />
    因此，“雪片”的身份根本不可能查明。<br />
    Verbum的记录只会显示他对网络的拜访只持续了不到两分钟的时间，仅够他登录和发布这条消息。<br />
    “雪片”可能在任何地方。<br />
    “雪片”可能是任何人。</p>

<hr />

<p>    Verbum的公告牌是其非常受欢迎的区域。至少从表面上看，“雪片”的警告很象经常出现在那里的许多其他恐吓性的邮件。它没有引起任何警觉。<br />
    开始，有五个用户对此警告作出了反应。尽管他们的邮件是寄给“雪片”的，但它们被发送到公告牌中，从而对每个人都是开放的。<br />
    致：雪片<br />
    自：Joyboy(欢乐男孩)<br />
    让我说明这点吧：你打算杀死某人，于是你事先把这消息告诉给全世界的人。<br />
    对。就是这样。<br />
    另外，让我再给你提一点点文字上的评论吧。我是指“死亡就站在你身后，默不作声，而且你也看不到它。”这句话，你是不是有点紧张过度？<br />
    顺便说一下，你的登录名取得很好。你差一点蒙对了。只要去掉第一个字，用“片”就完美无缺了。</p>

<p>    致：雪片<br />
    自：DeeTeeDude<br />
    我知道你。你暴露无遗。<br />
    去你妈的吧！！！</p>

<p>    致：雪片<br />
    自：Chaz<br />
    你是典型的毫无道德观念的社会垃圾，你们这些人污染了这个不管怎么样还算公正的设施。我建议成立一个特别检查委员会以制定出一个程序，在这些东西进入体面而又易受影响的中央处理器之前对它们进行甄别检查。<br />
    不过说句公道话，我必须承认我对那个被剥光了衣服的浪荡女人的形象比较感兴趣——四肢被缚，让人悠闲地探查着。这还真的激起了我的欲望。</p>

<p>    致：雪片及Chaz<br />
    自：Portia<br />
    我提醒你们俩：今日性别歧视的蠢猪便是明日餐桌上的猪排。</p>

<p>    致：雪片<br />
    自：Avatar<br />
    这是个相当有趣的公告。关于隐私，你提出了些精妙的见解。我们真的很脆弱，很容易受到伤害。而且我确信，在某个时候，某个地方，某个人将会正如你所描述的那样利用我们的这一弱点。<br />
    但你是那个人的可能性极小。<br />
    你说到了，但你能做得到吗？</p>

<p>    这些答复大都用一种嘲弄的语气，这是很正常的。Verbum的严肃认真的用户们对孩子气极少有耐心。在网络上的大熔炉里，“雪片”被众人的怒火淹没了。<br />
    第二天早上五点四十八分，“雪片”第二次登录进入Verbum。他当即去公告牌，在那儿浏览寄到他名字下的邮件。<br />
    几分钟以后，他向网络“上载”了他的第二个文件。</p>

<p>    致：发怒的人们<br />
    自：雪片<br />
    请允许我作出答复。<br />
    DEETEEDUDE—你的挖苦是插在我心口上的一把尖刀。对你的好意，我将不得不作出回报。<br />
    PORTIA—当切肉刀落下来的时候，请记住：是你提出屠宰场这个比喻的。<br />
    CHAZ—很好的玩笑。你可以说就是为此而死的。<br />
    JOYBOY—过度紧张？等着吧——你会有好戏看的。<br />
    AVATAR—我将把它当作一个友好的挑战。你可以亲自来衡量我的努力，我相信你不会失望的。<br />
    你深思熟虑的答复真令人精神倍增。<br />
    不幸的是，它并不能让你免除灾难。同其他人一道，我已经注意到你了。</p>

<p>    “雪片”并没有马上离开系统。他保持在线状态，停留在公告牌里。<br />
    几分钟以后，系统收到一份新的邮件。<br />
    致：雪片<br />
    自：Ziggy<br />
    请到此为止吧！对善意的恶作剧大家都会喜欢的，但你给它注入了一种凶杀色彩，在这块公告牌上没有它存在的地方。因为你干得太好了，因而使得这个玩笑更加令人感到不安。<br />
    很显然，你是个非常聪明而且很有才智的人。你能干出比这令人不愉快的游戏要好得多的事情来。它对你自己的能力、对这美好的资源都是一种浪费。</p>

<p>    “雪片”立刻作出了答复。这时候网上的用户较少，“交通”比较通畅，所以Verbum的高级计算机——一台Sun Sparcserver 1000——能够几乎是同时把他的回复发送到公告牌中。“雪片”和Ziggy便开始了一场艰难的谈话。<br />
    致：Ziggy<br />
    自：雪片<br />
    这不是玩笑。</p>

<p>    致：雪片<br />
    自：Ziggy<br />
    也许我们应该聊聊。“论坛”？</p>

<p>    Ziggy建议使用Verbum最受欢迎的服务之一—“论坛”。在论坛里面，他们可以进行“实时”交谈。这就是说，他们每个人敲击键盘的情况都会立即在对方的显示器屏幕上出现。<br />
    其他人可以加入到谈话中来，发表自己的评论。事实上，Verbum将为Ziggy和“雪片”之间的商谈设立一个电子会议室，其大门对其他任何人都是敞开着的，大家可以参与讨论。<br />
    致：Ziggy<br />
    自：雪片<br />
    我们到“后频道”吧。</p>

<p>    这也是一种联系，但它仅局限于两个人之间的联系。其他用户都不能偷听。事实上，“雪片”是在建议他们俩到房间里面去，然后将身后的门锁上。</p>

<p>    致：雪片<br />
    自：Ziggy<br />
    为什么去“后频道”呢？</p>

<p>    致：Ziggy<br />
    自：雪片<br />
    我想说，我是个属于那种害羞而又内向的类型的人。</p>

<p>    Ziggy有三分多钟没有说话。<br />
    致：Ziggy<br />
    自：雪片<br />
    还在那儿吗？</p>

<p>    致：雪片<br />
    自：Ziggy<br />
    好吧，去“后频道”。</p>

<p>    他们各自离开公告牌，然后申请单独联系，这种联系很快就给自动建立起来了。<br />
    从电子学的意义上讲，“雪片”和Ziggy现在面对面地相见了。<br />
    SNOWFLAKE&gt; 你是个女的。<br />
    ZIGGY&gt; 我的性别跟这没什么关系。<br />
    SNOWFLAKE&gt; 你要是男的就不会承认。对，肯定是个女的。而且还有一点，你表现出一种女性的委婉，介入时的一种女性的犹豫不决——一种女性的警惕。这很好。<br />
    ZIGGY&gt; 为什么这么说？<br />
    SNOWFLAKE&gt; 警惕性是很必要的。外面是一个冰冷、残酷的世界。这里面也一样。尤其是现在我已决定要证明自己。<br />
    ZIGGY&gt; 别再开玩笑了。没有人觉得好笑。<br />
    SNOWFLAKE&gt; 我再重复一遍：这不是开玩笑。可是你却不相信我。<br />
    ZIGGY&gt; 就假设我的确相信你吧。你愿意谈谈它的情况吗？<br />
    SNOWFLAKE&gt; 不过你最好问些令人感兴趣的问题。<br />
    ZIGGY&gt; 你为什么想杀人？<br />
    SNOWFLAKE&gt; 因为生命一钱不值。<br />
    ZIGGY&gt; 为什么要杀Verbum上的用户？<br />
    SNOWFLAKE&gt; 以示强调，使其更加引人注意。以证明可以通过网络来杀人。而且，这上面有许多思维敏捷的聪明人。我对聪明人特别感兴趣。<br />
    ZIGGY&gt; 你不喜欢聪明的人吗？<br />
    SNOWFLAKE&gt; 一点也不。——他们让我觉得好笑。他们总是自以为是地认为他们对天下万物无所不知。<br />
    ZIGGY&gt; 但是你也很聪明。<br />
    SNOWFLAKE&gt; “聪明”这个词根本不能用来形容我。<br />
    ZIGGY&gt; 啊，你属于由你一个人组成的一类。一个真正的大智大慧的智多星。<br />
    SNOWFLAKE&gt; 事实就是这样。如果愿意，你应该接受这点。<br />
    ZIGGY&gt; 你打算怎样实施这次行动？<br />
    SNOWFLAKE&gt; 你这是要我破坏一些伟大的惊奇。<br />
    ZIGGY&gt; 一些？用复数？<br />
    SNOWFLAKE&gt; 我并不限定数量。<br />
    ZIGGY&gt; 我猜测你只不过是想通过这个系统找到受害者然后实施谋杀而已。<br />
    SNOWFLAKE&gt; 这离实际情况比你可能想象的要近得多。这个网络将一直服务到那最后的致命的一击到来的时候。接下来是手工工作所必需的身体接触。<br />
    ZIGGY&gt; 你怎么能接触到我们？在这里我们用的都是匿名。<br />
    SNOWFLAKE&gt; 隐姓埋名只有在被人发现以前才会起作用。<br />
    ZIGGY&gt; 我不怎么喜欢你。我希望你离这个网络越远越好。<br />
    SNOWFLAKE&gt; 非常抱歉，这种情况不会发生。实际上，我倒想向你提同样的建议。<br />
    ZIGGY&gt; 我为什么要远离这个网络呢？<br />
    SNOWFLAKE&gt; 因为它已成了一个很危险的地方，还因为你这么容易上当。<br />
    ZIGGY&gt; 别告诉我象你这样有着超凡智力的人会去戏弄一个容易上当受骗的人。<br />
    SNOWFLAKE&gt; 这是你的第二个警告。这两个都是大多数人在有生之年难以得到的忠告。<br />
    ZIGGY&gt; 我要结束这次谈话了。<br />
    SNOWFLAKE&gt; 毫无疑问，在这么长的时间里，你终于产生了最为正常的冲动。但是它来得太晚了。<br />
    ZIGGY&gt; 为什么这样说？<br />
    SNOWFLAKE&gt; 因为你已经被发觉了。</p>

<p>    这个用“Ziggy”作为登录名的年轻妇女以一种不同寻常的方式终止了她与“雪片”的联系——她把手伸过桌子，关掉了计算机的电源。<br />
    她看着显示器的屏幕渐渐变成灰色。计算机里低沉的背景嗡嗡声也逐渐消失了。<br />
    她在Verbum和其他在线服务设施上已登录了成千上万个小时，她还从来没有象这样如此突然——如此粗鲁地退出讨论。但“雪片”逼她这样干：她感到一种强烈的直觉——离他越远越好。关掉开关立即将他从她的世界里清除掉了。<br />
    至少她是这么认为的。</p>

<hr />

<p>    在失去与Ziggy的在线联系后不久，“雪片”也退出了Verbum。然后他立刻又重新进入这项设施，这次是通过一个没有公开的电话号码进去的，这个号码是系统的主管者为了特殊的用途而保留的。虽然这样的号码只限于特定的人，但是通过一定程度的执着，一些精明的人有可能发现它们。<br />
    当他接上网络时，计算机的操作系统要求输入一个口令。这些口令也同样能被那些有一定程度的执着精神——以及一定程度的狡诈——的精明人士得到。<br />
    “雪片”输入一个含七个字符的字符串，计算机便允许他进入。<br />
    这次没有问候。他已经经过所有的公共屏幕，进入了系统自身内部。<br />
    他着手工作，利用计算机的操作工具程序寻找在过去14小时内发布且含有“雪片”这个词的每一条信息。<br />
    更改或消除Verbum计算机上的文件的内容需要最高级的使用权限，即所谓的“根用户”或“超级用户”身份。“雪片”使用的口令并不准许他那些特权。<br />
    然而，他能够改变系统用以识别每条上载邮件的电子标签。这种信息包括邮件进入系统的日期和时间。<br />
    “雪片”改变了计算机为他提取的所有文件的日期。这些包括他发出的每份信件以及别人对此作出的所有答复。他把这些文件的日期都改早了，这样它们看上去比实际要“老”一个星期。<br />
    六点五十六分，他退出系统。</p>

<p>    每天早上一到七点，Verbum功能强大的主机便开始进行两项管理家务的工作。<br />
    其中第一项工作是流览寻找在过去二十四小时内发送的文本文件，然后把它们拷备到磁带上，以后Verbum的技术工人会把这些磁带放入贮藏室内。<br />
    这些文件是Verbum之所以存在的一个主要原因。从某种意义上说，这一网络已被认为是一个永不间断地进行着的社会试验。赞助基金会的主管者相信，总有一天这些磁带记录将为以后的研究者提供一幅二十世纪最后十年中的计算机用户不断发展的、全面的画像。<br />
    这天早上，当它寻找新的邮件时，系统主机跳过那些日期已被“雪片”改早的。他所发布的邮件以及他收到的答复都没有被拷备到记录磁带上去。<br />
    然后，主机开始执行它的第二项日常工作。在浏览目录的时候，它已经把所有上面的日期已存在一星期以上的文件都作了记号。这天早晨，这些文件包括那些日期已被“雪片”更改过的邮件。<br />
    接下来删除所有作了记号的文件，以执行Verbum“任何邮件在系统里存放的时间都不得超过一个星期”的规定。登时，任何提及“雪片”的东西都从系统里消失了。</p>

<hr />

<p>    “雪片”已不复存在。但是七点刚过不久，曾使用这个登录名的人又通过Verbum的公用电话线路进来了，他这次用了个不同的登录名登录。<br />
    他编了个“机器人”——文件名为“BOT”(机器人)的程序，这个程序能自动拨号登录进入Verbum。一旦上了网络，这个“机器人”的表现就很难同人的表现区别开来。<br />
    它的使命是监视几个登录在Verbum里的用户。它会跟踪这些目标；会拷备他们的信件，以便“雪片”以后阅读。如果目标进入“论坛”，只要他呆在里面，“论坛”里的所有活动都会同样被自始至终地记录下来。<br />
    为避免引起别人的注意，“机器人”的指令要求它每次保持在线的时间不得超过一个小时。一小时后，它就会退出来，然后重新拨号，用新的登录名进入网络，继续监视系统。如果有人向它打招呼，“机器人”甚至能进行基本的会话。<br />
    “机器人”程序使“雪片”几乎能不间断地监视Verbum，甚至睡觉的时候。他的目标是他在程序的指令集里键入的六个不同的登录名。<br />
    这六个登录名是：<br />
    CHAZ<br />
    DEETEEDUDE<br />
    AVATAR<br />
    PORTIA<br />
    JOYBOY<br />
    ZIGGY</p>

<hr />

<p>    罗贝塔·赫金斯在Transbay汽车站叫了辆出租车。司机是个墨西哥人，也可能是危地马拉人，或者萨尔瓦多人——不管怎么样他肯定刚来这个城市不久，当她告诉他要去的地方——Kearney那边的Telsa大街时，她可以从他脸上困惑的表情看出这一点。<br />
    “哪？”他问。<br />
    “电报山。”她说。<br />
    他想了一下，一会儿脸上就开朗了。他抬起右手，向上旋转着地比划着；这种螺旋式的运动直到他碰到出租车的车顶才停止。他比划的是去那儿的路线。<br />
    “对，亲爱的。”她说，于是他加大油门驶上Fremont大街。<br />
    路上交通很拥挤。此时七点刚过，正是早晨上班高峰快到达最高点的时候。这次她比平时早了几个小时出发。她从来没有对埃利斯·霍伊尔说过她会迟到。她知道他是不会介意的。他甚至不会注意到她迟到了。白天的时间对这个人来说毫无意义。<br />
    司机还是真的知道怎么走。他从Fremont大街开到Folsom大街，沿Folsom大街驶过几个街区，然后向左拐上Embarcadero大街，从车流中一路穿插而过。<br />
    她的右面是海湾，从码头上一长溜棚屋的狭小缝隙中可以不时地等到它。她的前上方便是科伊特塔——一个圆柱形矛一样的水泥建筑物，从电报山山顶上葱郁的树林中耸然而立。<br />
    埃利斯·霍伊尔的房子就在塔的正下方，从这里她能看到它嵌在其他建筑物之间，这些建筑物紧紧挤在一起附着在山的斜坡上。<br />
    她引导司机离开Embarcadero大街，上了迷宫一样的山坡。这里的街道又陡又窄，房子都肩并肩地挤在一起，几乎到了人行道旁边。<br />
    这周围一带曾经是意大利渔民居住的地方，他们每天早上走下山去上船。一家独用或两家合用的房子排列于街道两旁。但是在过去的三十年里，许多老房子都被集体公寓和单元楼代替了。这些矮矮胖胖的立方体占据了它们的每一寸建筑面积。<br />
    当出租车爬上泰斯勒大街时，街上非常寂静。街道很窄，上面经常挤满了停放的车辆。上了一半，她对司机说，好，就是这儿。他们正前方是科伊特塔，高耸入云。<br />
    好付了车费，然后在E的房子前下了车。从这里看上去，它并不怎么象一间涂着白灰泥的小平房。窗上安了窗条，百叶窗是关着的，象平常一样。<br />
    罗贝塔从钱包里找出钥匙打开大门。门是用坚实的硬木制成的，有几英寸厚上面擦得放亮——这是扇很华丽的门，也是第一个迹象表明它可能不是你所想象的那种涂着白灰泥的平房。<br />
    她进了屋，把身后的门关上。屋里一片漆黑。<br />
    她打开灯。大门后面，不是你所想象的那样是个起居室，而是一个宽敞的阳台，它增加了房子的宽度。在正前方，阳台的边缘，是一扇可俯览全景的窗子。<br />
    窗上的帘子经常是拉上的。<br />
    罗贝塔开始从阳台的一头沿着黑色的铁楼梯下楼去。这房子是沿着电报山的山坡往下建造的。下面一层显得更加宽敞，从街道水平面下来你就进入了主要生活区——要是你能叫它“生活”的话。但埃利斯·霍伊尔的确生活在这里。<br />
    下到楼梯底部的时候，她闻到咖啡的香味。下面更加阴暗。这里唯一的光线是计算机显示屏幕发出的微弱的光芒。埃利斯·霍伊尔眼睛盯着屏幕，指尖停留在键盘上，这微弱的光线正照在他的脸上。他三十多岁的光景，头发凌乱，胡子有两天没刮了。看上去他又干了一整个通宵。<br />
    他甚至看都不看她一眼。屏幕上的东西吸引了他的注意力——他的注意力总是被这些东西吸引着。<br />
    他正坐在他的小安乐窝里。她不知道还能叫它别的什么。在房间最里面的另一扇风景如画的大窗子旁边——要是换了别的任何人，他都会在那儿放上几张沙发和一些椅子，向外朝着这些风景——埃利斯·霍伊尔放了六张桌子，摆成马蹄形状。他的转椅就位于U形正中。<br />
    桌面上堆满了东西。首先是计算机，三台计算机和显示器，还有一台打印机、一台传真机、一台复印机，以及她叫不出名字的电子设备。除此之外，还有一堆堆的纸张、书籍和手稿，它们堆得高高的，以至于几乎形成三堵墙壁把埃利斯·霍伊尔围在里面。小安乐窝。桌子外面更是一架子一架子的电子设备、摄像机、精巧的小机械、磁带，以及这些东西的零部件。<br />
    她在下面又开了几盏灯。他的眼睛始终没有离开过屏幕。他理应知道是她在这儿，但他只是象往常一样出神地盯着显示器，牙齿咬着下嘴唇。<br />
    说得客气点，他是个不合群的人，她这样想。她又对自己说，这实际上使她的工作变得更加容易，因为和埃利斯·霍伊尔在一起她不用在寒暄上浪费时间。而且，他是个异常聪明的人，你不得不宽容一点。<br />
    但被这样忽视仍使她感到不安。过去的六个月中，她每周两次到这儿来给他打扫房子、洗衣服、甚至做些饭——他的前妻非常急切地雇佣了她，她希望他在离婚后仍能正常地生活。<br />
    她对自己说，到现在她应该已习惯了他的这种奇怪的方式；但她又想，他待她应该更好一点。<br />
    她走进厨房，给他倒杯咖啡，在面包盒子里找了块蓝莓甜饼放在碟子上。她把咖啡和甜饼用一个托盘给他送去。放在靠近他肘部的一堆较低的书上。<br />
    此时他的手指正在键盘上飞快地跳跃着。<br />
    她正准备转身回厨房的时候，她注意到窗帘四周的边缘有一道窄窄的光线，象涂了奶油一样。她不能再无动于衷：这间黑屋里的那可怜的一丁点银白色的阳光令她激动。<br />
    她作了从她第一次见到这地方起就一直想作的事情。<br />
    她绕过桌子走到窗前，抓住窗帘，然后向一拉。屋里登时大亮。<br />
    罗贝塔·赫金斯站立在窗前，外面的景色尽入眼底。跨过水面她可以一直看到东海湾。前面正前方的海湾大桥通往奥克兰，桥的上层不时闪烁着汽车挡风玻璃反射的阳光。向Alcatraz方向望去，一只红白相间的渡轮正乘风破浪驶向马林县。近一点的是码头、Embarcadero大街和渔港，它们看上去象一堆玩杂技的小道具；再近处是正在山脚下的住房、单元楼和办公楼的窗户，看上去几乎触手可及。<br />
    她又得抑制住自己的冲动，问问他愿不愿意跟她把房子换一段时间住住，自从遇到埃利斯·霍伊尔起，这也许是第一百次了。她想对他说，嘿，黑房子都是一样的，我在M.L. King Parkway为你找一间三居室的房子，绝对好，你可以给窗户都钉上木板，这样就觉得自在了，你将会象生活在贝壳里一样开心。<br />
    她转身离开了这美好的景色。<br />
    埃利斯·霍伊尔的眼光终于离开了屏幕，正扭头看着她。看上去他似乎觉得有点好笑。脸上挂着淡淡的笑容：只要打扮得整整齐齐，他也不难看。<br />
    “你好，赫金斯夫人。”他说。<br />
    “嗯，”她答道。<br />
    她走进厨房，开始检查放在柜台上的食品盒。埃利斯·霍伊尔叫人把食品送来了。她每周准备两次食物，把它们保存在冰箱里。他并不挑剔，任何能合适地放在玻璃盘中而且他可以放入微波炉里的东西他都不在意。<br />
    她在水池里把脏碟子洗了洗，把食品放好，然后开动洗碗机。她又回到了大房间里。<br />
    里面又是一片黑暗。埃利斯·霍伊尔用窗帘把他那价植连城的风景盖上了。<br />
    他又钻回小安乐窝，回到那令人生厌的光芒之中。她站在那看了他一会儿：他又一次盯着屏幕，手指敲着键，停一会儿，再接着敲。他看上去很高兴——以一种奇怪的方式。<br />
    她想，你要是用这种方式寻找乐趣，那么你肯定是个很不同的人。<br />
    但埃利斯·霍伊尔就是这样的人。他在许多方面都与众不同。  </p>

</div>
  
  
  
    <footer>
        <a href="/blog/2005/11/28/The-network-of-killing-game-formerly-known-as-F2F-face-to-face-/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/11/20/Solaris-aio-/">Solaris上使用aio的问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-11-20T02:17:00+08:00" pubdate data-updated="true">2005-11-20</time>
        
         | 

<span class="tags">
  
    <a class='tag' href='/blog/tags/softwaredev/'>SoftwareDev</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>我们程序的IRI backend使用了ACE Proactor作为TCP client的框架，proactor实质上是使用了asynchronous IO(aio)从socket上读写数据。异步IO将速度慢的I/O过程留在操作系统内部进行，不会阻塞用户线程，因此在应用中无需使用多线程也可以达到较高的效率。AIO在windows平台上使用比较广泛，称为CPIO。Solaris 9是支持aio的，按理说不会有什么问题，可是我们的程序就出现了很多奇怪的问题。</p>

<ul>
  <li>有时CPU占用莫名其妙的很高，即使没有从网络收发数据 </li>
  <li>进程的lwp数量会变化，某些时候不断增加 </li>
  <li>用truss跟踪程序的时候，CPU就会降低</li>
</ul>

<p>反复检查过程序，都没有发现问题，程序只有一个线程进入了proactor，怀疑是ACE的proactor内部创建了线程，但看过ACE代码，里面也没有spawn线程。而且aio就是为了提高用户线程效率，让单线程可以处理大量并发IO的，没有理由需要再创建多线程。</p>

<p>我们的鬼佬chief architect是hacker出身的，他跟我们一起查找问题，最终找到了原因。</p>

<p>Some notes for us on AIO to help us better understand:</p>

<p>[1] <a href="http://sunsite.uakom.sk/sunworldonline/swol-03-1996/swol-03-aio.html">http://sunsite.uakom.sk/sunworldonline/swol-03-1996/swol-03-aio.html</a></p>

<p>[2] Keep in mind that any major improvement over standard read/write system calls requires the use of multi-processor machines, since AIOs are executed via light weight processes (LWPs). </p>

<p>[3] aiorandom syiorandom<br />
Both programs read 262,144 data blocks. Each block is 4,096 bytes. aiorandom submits a batch of 30 asynchronous reads at a time. Whenever the number of outstanding AIO operations falls below 15, it submits another batch. Results were recorded from the command timex. </p>

<p> aiorandom syiorandom<br />
real 42:43.92 1:02:48.68<br />
user  5:35.57    4:39.38<br />
sys  5:24.02    2:41.23</p>

<p>For aiorandom, this is a speed-up of close to 30 percent in real (elapsed) time. Note how aiorandom consumed more user CPU time due to the extra work associated with managing the AIO-related data structures. System CPU time doubled thanks to aiorandom running multiple LWPs. Keep this in mind on busy, multi-user systems since heavy AIO applications will depress the performance of other apps. </p>

<p>[4]  However, libaio is different; it implements system functions. Depending on the numbers of submitted AIO requests, libaio creates so-called “workers” (as implemented as LWP’s) to process the IO requests. </p>

<p>THIS IS WHAT IS KAIO .. [next line]</p>

<p>[1]  Solaris 2.5 implements kernel-supported asynchronous I/O. The kernel has implemented special, efficient AIO assists for the libaio. </p>

<p>[2] <a href="http://developers.sun.com/solaris/articles/thread_pools.html">http://developers.sun.com/solaris/articles/thread_pools.html</a></p>

<p> </p>

<p>Here is the code from aio.so:</p>

<p><a href="http://cvs.opensolaris.org/source/xref/on/usr/src/uts/common/os/aio.c">http://cvs.opensolaris.org/source/xref/on/usr/src/uts/common/os/aio.c</a></p>

<p>        /*<br />
    395  * wake up LWPs in this process that are sleeping in<br />
    396  * aiowait().<br />
    397  <em>/<br />
    398 static int<br />
    399 aionotify(void)<br />
    400 {<br />
    401  aio_t </em>aiop;<br />
    402 <br />
    403  aiop = curproc-&gt;p_aio;<br />
    404  if (aiop == NULL)<br />
    405   return (0);<br />
    406 <br />
    407  mutex_enter(&amp;aiop-&gt;aio_mutex);<br />
    408  aiop-&gt;aio_notifycnt++;<br />
    409  <strong>cv_broadcast(&amp;aiop-&gt;aio_waitcv);</strong><br />
    410  mutex_exit(&amp;aiop-&gt;aio_mutex);<br />
    411 <br />
    412  return (0);<br />
    413 }</p>

<p> </p>

<p>If the application uses a third party library that implements asynchronous operations, this may not be the best solution. This is because of the “anonymous” nature of aiowait(), which returns the result of any asynchronous read or write operation. And if a third party AIO library is used in the application, this means that aiowait() could return result sets of the third party library AIO calls as well. Due to obvious interface disparities, this could lead to unpredictable behavior. </p>

<p>.. i find <br />
out some very interesting things about the aio … especially<br />
the CPU usage being high is very normal .. good if you want<br />
to make a high capacity/performance server that will run on <br />
its own on a SMP machine .. then aio gives a very strong <br />
efficiency and raw performance .. but use extra CPU because<br />
the process have very high granularity of checking all async <br />
operations .. much higher than a user space thread .. </p>

<p>however this kind of server will hog CPU and if used in a mixed<br />
environment with many other systems on same host will not be<br />
a good solution .. also such process have no ability to define <br />
filters on the async events they listen for .. they will always get<br />
interrupts from any kind of asynch event in the system . .then <br />
have to go through that array of 1024 pointers and check if any<br />
of the non-null pointers in there will contain an event for them …. <br />
(thats why if you connect truss -p the CPU goes down .. all sigs<br />
are blocked for a process inside truss) </p>

<ul>
  <li>the behaviour with CPU etc. that we see in ismapserver seems<br />
quite ‘normal’ for the aio .. from what i can read the last days and<br />
from what you can see in the solaris os code. (you can also look <br />
in kernel.c and condvar.c) </li>
</ul>

<p>看来aio并不是那么好用，对于我们的程序而言，IRI接口的网络吞吐量并不是瓶颈，而且我们的程序本来就是多线程程序，其实并不需要使用aio。程序中的其他网络接口使用的TP Reactor（基于多线程，select）就工作得很好，效率也远超出需求了。对于IRI backend，甚至用一个线程收一个线程发就够了，因为不需要处理太多connection，线程数量在这里不是问题。</p>

<p>还是应该遵循用最简单的方法来解决问题的原则。</p>
</div>
  
  
  
    <footer>
        <a href="/blog/2005/11/20/Solaris-aio-/#disqus_thread">Comments</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/blog/page/16/">&larr; Older</a>
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/blog/page/14/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/06/24/try-octopress-markdown-features/">试验 Octopress 的各种特性</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/09/Some-reading-record/">一些读书记录</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/05/The-programmer-thought-of-uniting-the-reading-notes/">《程序员的思维修炼》读书笔记</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/10/By-mobile-phone-remote-control-Linux-backstage-radio-broadcast-requirements/">用手机遥控Linux后台播放豆瓣电台</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/25/In-the-amazon-bought-the-computer-motherboard-and-summarizes-the-experience-of-fault-return/">在亚马逊买电脑主板，故障退货的经历及总结</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tags</h1>
  <ul class="tag-cloud">
<a style="font-size: 134%" href="/blog/tags/android/">Android</a>
<a style="font-size: 108%" href="/blog/tags/anti-gfw/">Anti-GFW</a>
<a style="font-size: 70%" href="/blog/tags/appserver/">AppServer</a>
<a style="font-size: 70%" href="/blog/tags/blogging/">Blogging</a>
<a style="font-size: 70%" href="/blog/tags/build/">Build</a>
<a style="font-size: 70%" href="/blog/tags/diy/">DIY</a>
<a style="font-size: 104%" href="/blog/tags/diy/">Diy</a>
<a style="font-size: 70%" href="/blog/tags/excel/">Excel</a>
<a style="font-size: 93%" href="/blog/tags/funny/">Funny</a>
<a style="font-size: 85%" href="/blog/tags/gps/">GPS</a>
<a style="font-size: 139%" href="/blog/tags/gps-gis/">GPS_GIS</a>
<a style="font-size: 70%" href="/blog/tags/geocaching/">Geocaching</a>
<a style="font-size: 70%" href="/blog/tags/http/">HTTP</a>
<a style="font-size: 144%" href="/blog/tags/idea/">Idea</a>
<a style="font-size: 99%" href="/blog/tags/imageprocessing/">ImageProcessing</a>
<a style="font-size: 70%" href="/blog/tags/learning/">Learning</a>
<a style="font-size: 108%" href="/blog/tags/life/">Life</a>
<a style="font-size: 85%" href="/blog/tags/maven/">Maven</a>
<a style="font-size: 146%" href="/blog/tags/misc/">Misc</a>
<a style="font-size: 85%" href="/blog/tags/novel/">Novel</a>
<a style="font-size: 70%" href="/blog/tags/outdoor/">Outdoor</a>
<a style="font-size: 85%" href="/blog/tags/personaldevelopment/">PersonalDevelopment</a>
<a style="font-size: 93%" href="/blog/tags/reading/">Reading</a>
<a style="font-size: 93%" href="/blog/tags/running/">Running</a>
<a style="font-size: 70%" href="/blog/tags/sip/">SIP</a>
<a style="font-size: 142%" href="/blog/tags/software/">Software</a>
<a style="font-size: 160%" href="/blog/tags/softwaredev/">SoftwareDev</a>
<a style="font-size: 99%" href="/blog/tags/sports/">Sports</a>
<a style="font-size: 85%" href="/blog/tags/spring/">Spring</a>
<a style="font-size: 119%" href="/blog/tags/sys-admin/">Sys_Admin</a>
<a style="font-size: 104%" href="/blog/tags/timemanagement/">TimeManagement</a>
<a style="font-size: 85%" href="/blog/tags/weblogic/">WebLogic</a>
<a style="font-size: 70%" href="/blog/tags/backup/">backup</a>
<a style="font-size: 93%" href="/blog/tags/idea/">idea</a>
<a style="font-size: 104%" href="/blog/tags/mobile/">mobile</a>
<a style="font-size: 70%" href="/blog/tags/wallpaper/">wallpaper</a>
<a style="font-size: 70%" href="/blog/tags/书摘/">书摘</a>
<a style="font-size: 70%" href="/blog/tags/交通/">交通</a>
<a style="font-size: 70%" href="/blog/tags/公民与社会/">公民与社会</a>
<a style="font-size: 70%" href="/blog/tags/家电/">家电</a>
<a style="font-size: 70%" href="/blog/tags/建筑/">建筑</a>
<a style="font-size: 70%" href="/blog/tags/文化艺术/">文化艺术</a>
<a style="font-size: 70%" href="/blog/tags/概率/">概率</a>
<a style="font-size: 70%" href="/blog/tags/环保/">环保</a>
<a style="font-size: 70%" href="/blog/tags/统计/">统计</a>
<a style="font-size: 70%" href="/blog/tags/阅读/">阅读</a>

  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Leo Liang -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'aleung';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
