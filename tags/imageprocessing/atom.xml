<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: ImageProcessing | Good good study, day day up]]></title>
  <link href="http://aleung.github.com/blog/tags/imageprocessing/atom.xml" rel="self"/>
  <link href="http://aleung.github.com/blog/"/>
  <updated>2012-09-09T21:22:45+08:00</updated>
  <id>http://aleung.github.com/blog/</id>
  <author>
    <name><![CDATA[Leo Liang]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[RAW照片后期处理的常用操作]]></title>
    <link href="http://aleung.github.com/blog/2011/09/27/RAW-/"/>
    <updated>2011-09-27T22:33:00+08:00</updated>
    <id>http://aleung.github.com/blog/2011/09/27/RAW-</id>
    <content type="html"><![CDATA[<p>这里讲的是 Apple Aperture 3 的操作，但其他RAW处理软件（如Photoshop Lightroom）的功能和效果也都类似，可以参考。</p>

<h2 id="exposure">Exposure</h2>

<h3 id="exposure-1">Exposure</h3>

<p>黑位固定，直方图右侧拉伸。相当于相机的曝光量调整。</p>

<p><img src="https://lh6.googleusercontent.com/-fnAGXvmnFJE/ToHQKWlruvI/AAAAAAAAAZ0/O4pdxnS64yY/s800/exposure-1.jpg" alt="" />》<img src="https://lh5.googleusercontent.com/-FP6Vg1nAOWI/ToHQKRFOhtI/AAAAAAAAAZ4/0lESY5sW318/s800/exposure-2.jpg" alt="" /></p>

<h3 id="recovery">Recovery</h3>

<p>利用RAW记录的额外信息恢复高光溢出部分。</p>

<h3 id="black-point">Black Point</h3>

<p>利用RAW记录的额外信息恢复丢失的暗部细节。</p>

<h3 id="brightness">Brightness</h3>

<p>黑位与白位均固定，直方图中间色调左右移动。用于调整图像的整体明暗。与level工具的亮度调节功能类似，但level工具中若只拖动一个锚点时对直方图的影响更加局部，只改变特定色调范围。</p>

<p><img src="https://lh5.googleusercontent.com/-mKyUGov3PCc/ToHQJ9LMS-I/AAAAAAAAAZs/Z7XqqxDgQJk/s800/brightness-1.jpg" alt="" />》<img src="https://lh4.googleusercontent.com/-MWAZLV47es8/ToHQKHGqVNI/AAAAAAAAAZw/B4GjHYLSF_A/s800/brightness-2.jpg" alt="" /></p>

<h2 id="enhance">Enhance</h2>

<h3 id="contrast">Contrast</h3>

<p>中灰不变，直方图向两侧拉伸。（不建议使用，用level工具控制更准确）</p>

<p><img src="https://lh6.googleusercontent.com/-lZY-AgmwRcU/ToHQJ3eBQMI/AAAAAAAAAZo/1lTWE0LHHoA/s800/contrast.jpg" alt="" /></p>

<h3 id="definition">Definition</h3>

<p>增强图像局部的对比度，但不影响整体图像的对比度，直方图无整体性变化。可提高图像明暗交界的细节，例如让云朵更加立体。</p>

<h3 id="saturation">Saturation</h3>

<p>让RGB三原色的直方图趋于重合或者更加离散。用于减弱色彩或者增强色彩(变鲜艳)。饱和度增加时图像细节会丢失。</p>

<p><img src="https://lh6.googleusercontent.com/-EKHur68d4-A/ToHQKvYuHQI/AAAAAAAAAZ8/LRPgisNijDM/s800/saturation-1.jpg" alt="" />》<img src="https://lh3.googleusercontent.com/-NGeEU2MWZwg/ToHQLOXNoBI/AAAAAAAAAaE/hwsr11w3eS0/s800/saturation-2.jpg" alt="" /></p>

<h3 id="vibrancy">Vibrancy</h3>

<p>与saturation类似，但不影响肤色。用于人像照片中的色彩调整，但保持肤色不变。</p>

<h2 id="highlights--shadows">Highlights &amp; Shadows</h2>

<p>降低高光部分亮度，但不影响中间调和暗部；提高暗部亮度，但不影响中间调和亮部。直方图上的效果是高光部分和/或暗部扩展，移向中间调位置，但实际处理并非单纯的直方图映射，运算时会考虑到周边像素的色调的影响。用于对图像中过亮或者过暗的部分进行补偿，增加色调变化细节。</p>

<h2 id="levels">Levels</h2>

<p>将直方图进行映射变换，下横轴是输入，上横轴是输出。Aperture的levels工具可以调节四分之一色调的映射，可以完成部分本来需要使用曲线工具的调节。</p>

<p>Levels调整是在上面几种调整的基础之上进行的，可能会抵消了前面所做的调整的效果。若非必要不应该将它与前面提到的工具混合使用。</p>

<p><img src="https://lh3.googleusercontent.com/-Af7kvdJq3pU/ToHQKit_TwI/AAAAAAAAAaA/1x5cdJ1hZrE/s800/level-1.jpg" alt="" />》<img src="https://lh3.googleusercontent.com/-f0jePRCWRAI/ToHQQCnp4qI/AAAAAAAAAaI/qW_bMiOvGZw/s800/level-2.jpg" alt="" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Apple Aperture 数码照片处理几板斧]]></title>
    <link href="http://aleung.github.com/blog/2011/09/27/Apple-Aperture-/"/>
    <updated>2011-09-27T22:04:00+08:00</updated>
    <id>http://aleung.github.com/blog/2011/09/27/Apple-Aperture-</id>
    <content type="html"><![CDATA[<p><img class="right" src="https://lh5.googleusercontent.com/-MGOVmxQlebs/ToHSOBbvsCI/AAAAAAAAAaQ/ZgUEHwlGelk/s800/aperture3.jpg"></p>

<p>以前都用Photoshop来处理照片，刚开始用Aperture，还真不太适应，用了几天兼阅读了help，慢慢有些了解了。对于照片的后期处理，其实用什么工具都大同小异，基本上就是几板斧。没拍好的照片也没有必要费心去调，直接删除就得了。</p>

<h2 id="raw">基本原则：使用RAW格式拍摄</h2>

<p>RAW记录了拍摄时的原始信息，而jpg是已经经过相机处理之后的图像。用RAW格式提供了后期处理的更多可能性，例如曝光的增减（当然是小范围内了），白平衡的重新设定。</p>

<h2 id="section">基本调整</h2>

<ul>
  <li><strong>图像倾斜矫正及裁剪</strong>：Viewer下方的工具栏有图标，或者用快捷键G和C。</li>
  <li><strong>色温校准</strong>：相机的自动百平衡经常不太准确，需要在White Balance设置正确色温，常见光源的色温表在<a href="http://good-good-study.appspot.com/blog/posts/152001">这儿</a>；另外用 Enhance － Tint 可以分别调节高光／中间调／暗部的偏色。</li>
  <li><strong>曝光调整</strong>：用快捷键Alt－Shift－H打开暗部与高光溢出显示，调节Exposure让图像曝光正常。Highlights &amp; Shadows可以挽救部分高光、暗部细节。如果要进一步调整，使用Enhance及Level。调整过程中，快捷键M可查看原始图像（Master）作对比。</li>
</ul>

<p>调整方法见<a href="http://good-good-study.appspot.com/blog/posts/153002">RAW照片后期处理的常用操作</a></p>

<h2 id="section-1">其他调整</h2>

<ul>
  <li><strong>色差纠正</strong>（消除紫边）：Chromatic Aberration</li>
  <li><strong>降噪</strong>：Noise Reduction</li>
  <li><strong>图像锐化</strong>：Edge Sharpen</li>
</ul>

<h2 id="section-2">常用快捷键</h2>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>V</td>
      <td>Switch view mode (browser / split view / viewer)</td>
    </tr>
    <tr>
      <td>I, H</td>
      <td>Show Inspector</td>
    </tr>
    <tr>
      <td>F</td>
      <td>Full screen</td>
    </tr>
    <tr>
      <td>W</td>
      <td>Switch Inspector tab (Library / Metadata / Adjustments)</td>
    </tr>
    <tr>
      <td>Y</td>
      <td>Show metadata</td>
    </tr>
    <tr>
      <td>T</td>
      <td>Show metadata tooltips</td>
    </tr>
    <tr>
      <td>M</td>
      <td>Show master image</td>
    </tr>
    <tr>
      <td>Z</td>
      <td>Zoom 100%</td>
    </tr>
    <tr>
      <td>`</td>
      <td>Loupe</td>
    </tr>
    <tr>
      <td>Alt-Shift-H</td>
      <td>Highlight hot &amp; cold areas</td>
    </tr>
    <tr>
      <td>Alt-F</td>
      <td>Show focus points</td>
    </tr>
    <tr>
      <td>0~5</td>
      <td>Rating</td>
    </tr>
  </tbody>
</table>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Color temperature of common light sources]]></title>
    <link href="http://aleung.github.com/blog/2011/09/27/Color-temperature-of-common-light-sources/"/>
    <updated>2011-09-27T19:28:00+08:00</updated>
    <id>http://aleung.github.com/blog/2011/09/27/Color-temperature-of-common-light-sources</id>
    <content type="html"><![CDATA[<p> </p>

<table>
  <thead>
    <tr>
      <th>Temperature</th>
      <th>Typical Sources</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1000K</td>
      <td><strong>Candles</strong>, oil lamps</td>
    </tr>
    <tr>
      <td>2000K</td>
      <td><strong>Very early sunrise</strong>, low effect tungsten lamps</td>
    </tr>
    <tr>
      <td>2500K</td>
      <td><strong>Household light bulbs</strong>(2680K - 40 W incandescent lamp)</td>
    </tr>
    <tr>
      <td>3000K</td>
      <td>Studio lights (continuous), 200 W incandescent lamp, (<strong>3200K - Sunrise/sunset;</strong><strong>3400K - 1 hour from dusk/dawn</strong>, Tungsten lamp)</td>
    </tr>
    <tr>
      <td>4000K</td>
      <td>Clear flashbulbs (now obsolete),<strong>Fluorescent</strong></td>
    </tr>
    <tr>
      <td>5000K</td>
      <td><strong>Typical average daylight</strong>, electronic flash</td>
    </tr>
    <tr>
      <td>5500K</td>
      <td>The sun at noon, (<strong>5500~6000K - vertical daylight</strong>)</td>
    </tr>
    <tr>
      <td>6000K</td>
      <td><strong>Bright sunshine with clear sky</strong></td>
    </tr>
    <tr>
      <td>7000K</td>
      <td><strong>Slightly overcast sky</strong></td>
    </tr>
    <tr>
      <td>8000K</td>
      <td><strong>Hazy sky</strong></td>
    </tr>
    <tr>
      <td>9000K</td>
      <td><strong>Open shade on clear day</strong></td>
    </tr>
    <tr>
      <td>10,000K</td>
      <td><strong>Heavily overcast sky</strong></td>
    </tr>
    <tr>
      <td>11,000K</td>
      <td><strong>Sunless blue skies</strong></td>
    </tr>
    <tr>
      <td>20,000+K</td>
      <td>Open shade in mountains on a really clear day</td>
    </tr>
  </tbody>
</table>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[照片的地理位置信息]]></title>
    <link href="http://aleung.github.com/blog/2006/06/17/Photographs-of-the-geographical-location-information/"/>
    <updated>2006-06-17T08:59:00+08:00</updated>
    <id>http://aleung.github.com/blog/2006/06/17/Photographs-of-the-geographical-location-information</id>
    <content type="html"><![CDATA[<p>在JPG图像的 EXIF meta data 中，有一组是与地理位置信息相关的，包括经纬度、高度、方向等，可以记录拍摄图像当时的位置信息。不过，目前内置GPS或者带有GPS接口的相机还非常少见，所以这组数据通常是空的。</p>

<p><a href="http://wwmx.org/">World-Wide Media eXchange</a> 提供了免费工具 WWMX Location Stamper，能够依照数码照片的拍摄时间将GPS记录的track的位置信息设置到照片的EXIF中。只要在拍摄的过程中同时打开GPS将track记录下来，通过这个软件处理，照片就能附加上坐标了。</p>

<p>照片添加了地理位置信息，日后的整理就会更加方便，不仅不会忘记照片是在什么地方拍的，而且以后一定会有软件能够根据坐标来管理照片，例如查找在某个区域拍摄的照片。</p>

<p>就目前而言，能够利用EXIF地理位置信息的软件还不多。<a href="http://www.opanda.com/cn/iexif/index.html">IExif</a>是一个EXIF查看工具，对于带有地理信息的照片可以在GoogleMap上面定位出拍摄地点。最新的Google Picasa Beta也增加了对geotag的支持，包括export到Google Earth，或者在Google Earth上给照片标注坐标。<a href="http://picasaweb.google.com/">Google Picasa Web Album</a> 开始公开测试了，相信Google一定会将旗下的GoogleMap，GoogleEarth，GooglePicasa集成在一起。</p>

<p>至于目前广泛使用的在线相册flickr，本身并不支持EXIF的地理信息，但是可以通过tag来记录照片的坐标，称为<a href="http://en.wikipedia.org/wiki/Geotag">geotag</a>。有大量的第三方网站和插件能够处理或使用geotag，通过geotag来聚合信息。<a href="http://www.flickr.com/groups/flickrimportr/">Flickr Importer</a> 可以在上传照片的时候根据EXIF自动创建geotag。也有少数第三方flickr服务能够直接使用EXIF地理信息，例如<a href="http://www.roblog.com/flickrfly-docs/">FlickrFly</a>。</p>

<p>我的<a href="http://www.flickr.com/photos/aleung/">flickr</a>里有一些照片已经标记上了，并且可以使用FlickrFly飞过去看看。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[色彩管理 (1)]]></title>
    <link href="http://aleung.github.com/blog/2004/11/12/Color-management-1-/"/>
    <updated>2004-11-12T22:53:00+08:00</updated>
    <id>http://aleung.github.com/blog/2004/11/12/Color-management-1-</id>
    <content type="html"><![CDATA[<p>处理照片时，被偏色问题折磨得受不了，这一个多星期里刻苦学习色彩管理知识。无忌上面几百个跟贴的话题看得头晕脑胀，还是东一句西一句就没有系统的叙述。</p>

<p>总算有点头绪了，把学到的东西总结一下。主要针对怎样在显示器上显示出准确的颜色，不涉及太多打印、印刷的内容，适合普通用户啦。</p>

<p>一张照片，从扫描仪扫描出来，或者用数码相机拍摄下来，保存成文件，再放上网，在不同的电脑上查看，效果跟原始图像往往已经有很大不同了，而且不同的电脑看出来的效果还不一样，可能是暗了，或者亮了，又可能是偏红，或者偏青。色彩管理的目的，就是在图像输入、处理、输出的整个过程中，尽可能保持一致。</p>

<p>色彩管理，首先要理解的概念是色彩空间。这是在色彩量化的过程中引入的概念。常用的图像格式都是用RGB三个数值来表示颜色的，但是，当说一个点的色彩是(203,45,73),这样的数值有什么意义呢？它表示什么颜色？红色，是怎样的红？如果不将数值放入一个坐标系中，数值就没有实际的含义。色彩空间就是颜色的坐标系。</p>

<p>不同的色彩模型，有不同的坐标体系，例如我们最熟悉的RGB，用于印刷的CMYK，还有基于色度模型的LAB等等。就像几何学中，有直角坐标也有极坐标。下图所示的是标准色彩空间CYE XYZ。下面主要是按照大家最熟悉也是最直观的RGB模型来说吧。</p>

<p><a href="http://www.flickr.com/photos/leoliang/5137782234/"><img src="http://farm2.static.flickr.com/1427/5137782234_27ebf3e711.jpg" alt="CIE 1931 xy chromaticity diagram" /></a></p>

<p>现实世界中的色彩是异常丰富的，但是由于技术的限制，每种设备所能辨别或者重现的色彩范围有限，并不能覆盖可见光域所有的颜色。在图像数字化的转换中，由于设计原因和物理特性的不同，不同设备的量化的效果也不同。例如同样是(203,45,73)这样的数值，一台显示器会显示成鲜红，另一台会显示成暗红。这相当于不同设备的坐标轴的标定是不一样的。因此，每台设备，都有它自己的色彩空间。</p>

<p>这样，问题就来了，没有一个标准，颜色怎么可能准确？扫描仪的色彩空间与显示器的色彩空间不一致，将扫描出来的数据原封不动送给显示器，颜色就会改变了。我们必须有个标准的坐标系才行。现在就要引入一个新的概念—-设备无关的色彩空间（PCS）。上面提到的CYE XYZ就是一种常用的标准的设备无关色彩空间。图像数据在不同色彩空间之间转换时，要经过特定的算法进行换算，相当于几何中的坐标系变换。</p>

<p>一个图像文件，里面保存的是一堆数据，怎么知道它是哪个色彩空间？我们需要给它贴一个”标签”，在标签里说明这些数据采用的是什么色彩空间，当支持色彩管理的图像处理软件读取这个文件时，先看看标签，就知道怎么去做色彩空间的转换了。ICC profile，就是这样的”标签”，它保存着一组数据，包含了这个色彩空间与PCS之间的换算关系。把ICC profile数据嵌入到图像文件里面，图像文件就能对数据的色彩空间作出自描述。但是，千万别把profile弄错了，如果一个文件，它的数据实际上是A色彩空间的，你把B色彩空间的profile指定给它，图象处理软件就会把它当成B色彩空间来转换，造成偏色。就像一个网页，明明是GB2312编码的，你把它当成big5来打开，就会出现乱码。</p>

<p>CYE XYZ够标准了，但在实际的图像处理中并不使用，常用的标准色彩空间是sRGB、Adobe RGB等，为什么？首先，xyz这样的坐标系不直观，如果是RGB坐标系，R的数值大了，你就知道是偏红了，但x增大了，但你不知道它有什么实际意义。其次，CYE XYZ色彩空间的范围太大了，远远超出设备、材料能表现的色彩范围，如果用同样的精度来量化，就需要更大的数据长度，而多出来那部分其实是没有意义的，因为不可能用到，浪费了存储空间。反正已经知道了每个色彩空间与XYZ空间的换算关系了，就可以在任意两个空间进行转换。</p>

<p>空间转换过程是可能会有损失的（引起色彩变化）。一个原因是换算引起的精度损失，不过这一般可以忽略。主要的损失是发生在大空间往小空间转换时，在源空间可以表示出来的颜色，不再目标空间的范围内，转换引擎只好用一种接近的颜色来代替，造成了色彩的失真。例如，九寨沟的水那种碧中带蓝的颜色就无法在sRGB空间中表现出来。下图表示常用的色彩空间的色域。</p>

<p><img src="http://www.normankoren.com/Sachs_gamut_chart_2_640.jpg" alt="" /></p>

<p>ICC profile描述的是色彩空间的特性。前面说过了，每个设备都有自己的色彩空间，因此也应该有一个相应的profile。准确的profile需要采用专业仪器测试得出，普通用户是没有这样的条件的，只能采用设备厂商给出的profile。如果质量控制得好，同一个型号的产品的特性会比较相似，基本上还是可以接受的。低档设备可能厂家不提供profile，这样的设备就无法进行准确的色彩管理了。对于没有profile的设备，可以当作它的色彩空间是sRGB来处理，因为sRGB是一个比较通用的标准，设备设计时往往都会尽量符合这个标准的。</p>

<p>具有色彩管理功能的软件（例如photoshop），可以根据设备的profile，先将图像转换为设备所用的色彩空间，再送给设备输出，这样颜色就能保持一致。但是有些设备（或者驱动程序）已经内置了色彩管理功能，它能够接收标准色彩空间（例如sRGB）的数据，在内部转换成设备色彩空间再输出。这时候photoshop就不应该做预转换，否则重复转换也是造成失真。</p>

<p>正因为有这么多不同的情况，色彩管理才变得很复杂和难以理解，输入、处理、输出各个环节都是相关的，一个环节的错误就会引起最终结果的错误，配置的时候要非常小心。</p>
]]></content>
  </entry>
  
</feed>
